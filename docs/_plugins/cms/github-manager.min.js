var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,c)}s((r=r.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","https://jspm.dev/uuid"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGists=t.getUserOAuthCode=void 0;var n=e("https://jspm.dev/uuid");console.log((0,n.v4)());var r={"User-Agent":"0rexer0","Access-Control-Allow-Origin":"*",Authorization:"token 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"},o="api.github.com/application/vnd.github.v3.base64";function i(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,o,i;return __generator(this,(function(u){switch(u.label){case 0:return console.log("Authing"),localStorage.setItem("state",(0,n.v4)()),console.log("test",(0,n.v4)()),e="https://github.com/login/oauth/authorize",t=function(e){return Object.keys(e).reduce((function(t,n,r,o){return t+(0===r?n+"="+e[n]:"&"+n+"="+e[n])}),"?")},r=t({client_id:"eaabe3c2d11922cd669d",redirect_uri:"https://xer0rex.com/oauth",scope:["public_repo"]}),o=encodeURI(e+r),i=new Request(o,{headers:{"User-Agent":"0rexer0","Access-Control-Allow-Origin":"*","X-Rex":"Loves You!"}}),[4,fetch(e,i)];case 1:return[2,u.sent()]}}))}))}t.getUserOAuthCode=i,t.getGists=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return console.log("running gists"),[4,i().then((function(e){return console.log(e)})).catch((function(e){return console.error("oAuth2 code retreival failed: "+e.message)}))];case 1:return t.sent(),e=new Request(o,{headers:r}),console.log("making REST call with: ",e),[4,fetch(o,e).then((function(e){return e.json().then((function(e){return console.log("JSON response",e),e}))})).catch((function(e){console.log("error: "+e.status+": "+e.statusText)}))];case 2:return[2,t.sent()]}}))}))}}));
